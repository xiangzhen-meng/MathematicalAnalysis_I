# 序列极限与函数极限的关系（海涅归结原理）

## 定理叙述

### 叙述
$$
\begin{align}
&\exists \lim_{ x \to x_{0} } f(x)=A \\
\iff & \forall\{x_n\} \subset O^-(x_{0}) 且\lim_{ n \to \infty } x_n=x_{0}(x_n\neq x_{0}),\lim_{ n \to \infty } f(x_n) =A
\end{align}
$$
### 理解

函数的狭义极限有两个要点：
1. 保证自变量以某种方式趋向于 $x_{0}$
2. 保证这样情况下的函数值可以与 A 的距离任意小

所以，上述的数列形式的表述就分别保证了这几点
$$
\forall\{x_n\} \subset O^-(x_{0})
$$
保证了取极限的过程是有定义的，而尤其值得注意的是 $\forall$ 符号，这表示逼近到 $x_{0}$ 的方式是任意的
$$
\lim_{ n \to \infty } x_n=x_{0}
$$
这保证了能够逼近到 $x_{0}$ 

### 等价叙述
$$
\begin{align}
&\exists \lim_{ x \to x_{0} } f(x) \\
\iff & \forall\{x_n\} \subset O^-(x_{0}) 且\lim_{ n \to \infty } x_n=x_{0},\exists \lim_{ n \to \infty } f(x_n)
\end{align}
$$
这个叙述看起来好像更弱，因为他保证了存在，但并没有保证相等。但其实相等可以由存在推出，也即相等和存在在这里是等价的

## 证明

### 必要性

必要性的证明是容易的，下面使用 $\varepsilon-\delta$ 语言硬干
$$
\begin{align}
&\forall\varepsilon>0, \exists \delta>0,\forall x\in O^-(x_{0},\delta),|f(x)-A|<\varepsilon \\
\end{align}
$$
而对于取定的 $\delta$，由于序列逼近 $x_{0}$，故一定能够找到在 $x_{0}$ 的该 $\delta$ 去心邻域中序列的某项后的所有项，即有：
$$
\exists N\in \mathbb{N},\forall n>N,0<|x_n-x_{0}|<\delta
$$
将这样的 $x_n$ 带入到定义式当中，即证毕

### 充分性

#### 所有趋近方式得到的极限都相等吗？

首先要思考一个问题，对于任意方式趋近到 $x_{0}$ 的序列，他们对应函数值的序列极限一定是同一个值 A 吗？答案是肯定的，但这并不 trivial ，下面给出证明：

首先任意取两个序列，$\{x_n^1\}$ 和 $\{x_n^2\}$ ，要求这两个序列的极限都为 $x_{0}$，也即他们两个用不同的方式趋近了 $x_{0}$ ，这样的情况下，假设他们两个对应函数值的极限分别为 $A_{1}$ 和 $A_{2}$
我们想要证明 $A_{1}=A_{2}$ 

可以构造一个新的序列，这个序列是由原来两个序列组成的：
$$
\{x_n\}=\{ x_{1}^1, x_{1}^2,x_{2}^1,x_{2}^2,x_{3}^1,x_{3}^2,\dots \}
$$
将这两个序列的对应项交错排列，形成这样的序列。这给出了一种新的趋近方式（显然对给定的 $\varepsilon$ 可以找到恰当的 $N$ 使它趋近）。有条件可以知道，这个函数在对应的这段极限存在，将其记为 $\lim_{ n \to \infty }f(x_n)=A$ 

显然有 $f(x_n^1)$ 和 $f(x_n^2)$ 是 $f(x_n)$ 的子列，而原序列有极限，因此子列极限与原序列极限相同，即有：
$$
A_{1}=A_{2}=A
$$
由任意性，可以知道任意序列对应函数值极限都相等，证毕

#### 对定理的证明

使用反证法，若不然，则 $f(x)$ 不能收敛到 A，可以形式化地写成：
$$
\exists \varepsilon_{0}>0,\forall\delta>0,\exists x\in O^-(x_{0},\delta),|f(x)-A|\geq \varepsilon_{0}
$$
什么样的序列才能让他不收敛呢？尝试构造：
构造中使用了经典的 [[波尔查诺 (Bolzano) 二分法#例子 4：一种带有强迫性质的取数方法]]

取 $\delta_{1}=1$，则 
$$
\exists x_{1}\in O^-(x_{0},\delta_{1}),s.t.|f(x_{1})-A|\geq\varepsilon
$$
取 $\delta_{2}=\min\left( \frac{1}{2},|x_{1}-x_{0}| \right)$，则 
$$
\exists x_{2}\in O^-(x_{0},\delta_{2}),s.t.|f(x_{2})-A|\geq\varepsilon
$$
这样能够保证 $x_{2}$ 比 $x_{1}$ 更加趋近 $x_{0}$

依此续行：
取 $\delta_{n}=\min( \frac{1}{n},|x_{n-1}-x_{0}|)$，则 
$$
\exists x_{n}\in O^-(x_{0},\delta_{n}),s.t.|f(x_{n})-A|\geq\varepsilon
$$
如此，构造出了互异的点列，这样的点列趋近到 $x_{0}$ 

由条件，这样趋近到的函数值序列极限存在，为 A，即：
$$
\forall\varepsilon_{0}>0,\exists N\in \mathbb{N},\forall n>N,|f(x_n)-A|<\varepsilon_{0}
$$
但是这与构造方式矛盾，故原命题成立，证毕

## 推广：单侧极限的海涅归结原理

### 等价形式一

>[!note] 等价形式一：更加 trivial 的版本
>$$
>\begin{align}
&\exists \lim_{ x \to x_{0}^- } f(x)=A \\
\iff & \forall\{x_n\} \subset (x_{0}-\delta,x_{0}) 且\lim_{ n \to \infty } x_n=x_{0},\lim_{ n \to \infty } f(x_n) =A
\end{align}
>$$

这是一个非常自然的想法。只要限制任取的序列处于 $x_{0}$ 左侧即可

必要性的证明是显然的

充分性的证明：

仍然使用反证法：若不然，则 $f(x)$ 左极限不能趋近于 A，也即跟 A 有某个不充分小的距离。依然尝试构造函数值序列的反例，只不过这次的构造方式有点区别：

仍然取 $\delta_{n}=\min( \frac{1}{n},|x_{n-1}-x_{0}|)$，则 
$$
\exists x_{n}\in  (x_{0}-\delta_n,x_{0}),s.t.|f(x_{n})-A|\geq\varepsilon
$$
同样的，仍然保证了 $x_{n+1}$ 比 $x_n$ 更加从左侧趋近，进而导出矛盾

### 等价形式二

注意到，等价形式一中，我们构造出的序列显然为单调递增的。于是，我们可以对条件进行加强：

>[!note] 等价形式二：更强的版本
>$$
>\begin{align}
&\exists \lim_{ x \to x_{0}^- } f(x)=A \\
\iff & \forall \{x_n\},\lim_{ n \to \infty } x_n=x_{0}且\ x_{n+1}\geq x_n,\ \lim_{ n \to \infty } f(x_n) =A
\end{align}
>$$

证明过程与上述等价形式一完全相同，因为上述证明的过程不自觉地就构造出来了一个单调递增的序列

## 应用

### 证明发散性

对于收敛函数，必有其在某去心邻域任意趋向于 $x_{0}$ 的序列均收敛于同一个值

对上述命题取逆否命题，则得到了一个发散序列的等价条件：

对于在某去心邻域任意趋向于 $x_{0}$ 的序列，存在至少两个序列 **不能收敛于同一个值**，则该函数发散

也即，海涅归结原理将判断函数发散转化为了：找出函数值的两个子列，证明他们不收敛于同一个值即可