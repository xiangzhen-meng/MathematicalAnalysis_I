# 连续函数用有理点逼近无理点

## 概述

>[!note] 命题 1 
>函数 $f$ 和 $g$ 是 $\mathbb{R}$ 上的连续函数，且 $\forall x\in \mathbb{Q},f(x)=g(x)$，求证：$\forall x \in \mathbb{R},f(x)\equiv g(x)$

这个命题给出了连续函数用有理点逼近无理点的方式。也即，如果某个命题可以较容易的对有理点证明，则它对全体实数都是成立的

## 证明

取有理数列 $\{r_n\}$，使得 $\lim_{ n \to \infty }r_n=x$，则有：$f(r_n)=g(r_n)$ ，则：
$$
f(x)=\lim_{ n \to \infty } f(r_n)=\lim_{ n \to \infty } g(r_n)=g(x)
$$
证毕

## 例子

### 例 1 柯西方程的连续解

>[!note] 柯西方程的连续解
>若 $f$ 在 $x=0$ 连续，且有：$$\forall x,y\in \mathbb{R},f(x+y)=f(x)+f(y)$$求证：$f$ 在 $\mathbb{R}$ 上连续，且 $f(x)=f(1)x$

#### 连续性证明：

首先取值：令 $x=y=0$ 推出 $f(0)=0$

令 $\forall x_{0}\in \mathbb{R},令x=x_{0}+\delta$，并且使 $\delta\to {0}$，得到：
$$
\lim_{ x \to x_{0} } f(x)=\lim_{ \delta \to 0 } f(x_{0}+\delta)=\lim_{ \delta \to 0 } f(x_{0})+\lim_{ \delta \to 0 } f(\delta)=f(x_{0})+f(0)=f(x_{0})
$$
连续性证毕

#### 通解

首先证明在 **整数** 范围内成立

当 $x>0,x\in \mathbb{Z}$ 时，有：
$$
f(x)=f(x-1)+f(1)=f(x-2)+2f(1)=\dots=f(0)+xf(1)=xf(1)
$$
当 $x<0,x\in \mathbb{Z}$ 时同理可证

故整数范围内成立

下面证明在 **有理数** 范围内成立

当 $n>0,n\in \mathbb{Z}$ 时，有：
$$
f(1)=f\left( \frac{1}{n}+\frac{1}{n}+\frac{1}{n}+\dots+\frac{1}{n} \right) = nf\left( \frac{1}{n} \right) \iff f\left( \frac{1}{n} \right)=\frac{1}{n}f(1)
$$
当 $x>0,x\in \mathbb{Q}$ 时，可以将其写成 $x=\frac{m}{n};m,n>0;m,n\in \mathbb{Z}$ ，故有：
$$
f\left( \frac{m}{n} \right)=f\left( \frac{1}{n}+\frac{1}{n}+\frac{1}{n}+\dots+\frac{1}{n} \right)=mf\left( \frac{1}{n} \right)=\frac{m}{n}f(1)
$$
当 $x<0,x\in \mathbb{Q}$ 时，同理可证

故有理数范围内成立

对于 **实数** 范围内，由上述 [[连续函数用有理点逼近无理点#概述|命题 1]] 可以知道能够逼近

#### 进一步的说明

进一步地，不加证明地给出一些等价的条件，使其与 “$f$ 在 $x=0$ 连续” 等价，且下面的条件对于这个问题互相等价

1. 函数在 $\mathbb{R}$ 连续
2. 函数在某个区间有界
3. 函数在某点连续
4. 函数在某区间单调
5. 函数保号
6. 函数在某点可导

参考：[知乎](https://zhuanlan.zhihu.com/p/616100030) [某不知名博客](http://www.duodaa.com/blog/index.php/archives/2/)

### 例 2 中学时代的 “递降” 方法

#### 原题

>[!note] 回忆杀
>函数 $f(x)\in C[0,+\infty)$ 满足：$$f(x)=f(x^2)$$求证：$f(x)\equiv c$

$\forall x>0$ 都有：
$$
f(x)=f(x^{1/2})=f(x^{1/2^2})=\dots=f(x^{1/2^n})
$$
对 n 取极限，得到：
$$
f(x)=\lim_{ n \to \infty } f(x^{1/2^n})=f(1)
$$
另一方面，对于 $f(0)$，考虑另外一种逼近的方式：
$$
\forall x\in (0,1),f(x)=f(x^2)=\dots=f(x^{2^n})
$$
对 n 取极限，得到：
$$
f(x) = \lim_{ n \to \infty } f(x^{2^n})=f(0)
$$
而另一方面，$f(x)=f(1)$，因此有：
$$
f(0)=f(1)
$$
证毕

#### 变式

同理，将条件改成 $f(2x)=f(x)$ 也是同样的操作手法

### 例 3 既凸又凹的连续函数一定是线性函数

>[!note] 既凸又凹的函数
>设 $f(x)\in C_\mathbb{R}$，且有：$$\forall x,y\in \mathbb{R},f\left(\frac{x+y}{2}\right)=\frac{1}{2}[f(x)+f(y)]$$求证：$f(x)=[f(1)-f(0)]x+f(0)$

#### 分析

要证上式，只需要证明：
$$
f(x)-f(0)=x[f(1)-f(0)]
$$
这显然是一个非常像累加的式子，因此我们考虑逼近方法证明

#### 证明

改造原式的形式，使其更加符合目标形式
$$
2f(\frac{x+y}{2})-f(y)-f(0)=f(x)-f(0)
$$
跟原式就差了个 0 ，故令 $y=0$，得到：
$$
2\left[ f\left( \frac{x}{2} \right)-f(0) \right]=f(x)-f(0)
$$
考虑到 $\frac{x}{2}$ 与 $x$ 的关系，不妨先讨论 $x=2^k,k\in \mathbb{N}$ 的情形
$$
f(2^k)-f(0)=2[f(2^{k-1})-f(0)]=\dots=2^k[f(1)-f(0)]
$$
接下来，尝试对于 $[2^k,2^{k+1}]$ 之内的所有实数进行逼近。这是不容易的。但是联想到 2 的特殊性，我们尝试使用 [[波尔查诺 (Bolzano) 二分法]] 配合 [[闭区间套定理]] 证明

$\forall \xi\in [2^k,2^{k+1}]$ 考虑构造闭区间套套住 $\xi$：

令 $[a_{1},b_{1}]=[2^k,2^{k+1}]$ 取 $x_{1}=\frac{a_{1}+b_{1}}{2}$
若 $\xi=x_{1}$，则 $f(\xi)=f\left(\frac{a_{1}+b_{1}}{2}\right)=\frac{1}{2}[f(x)+f(y)]=[f(1)-f(0)]\xi+f(0)$
若否，则必然落在两个区间中的一个，取其为 $[a_{2},b_{2}]$

依此续行，如果中间某个二分点找到了 $\xi$ 则成功
如果没找到，则构造出了一个闭区间套，满足如下性质：
$$
a_n<\xi<b_n
$$
其中的 $a_n,b_n$ 均满足性质

对于两边 n 取极限，得到：
$$
\lim_{ n \to \infty } a_n=\xi=\lim_{ n \to \infty } b_n
$$
因此由函数的连续性，有：
$$
\begin{align}
f(\xi)&=f(\lim_{ n \to \infty } a_n)=\lim_{ n \to \infty } f(a_n) =\lim_{ n \to \infty }[a_n(f(1)-f(0)) + f(0)] \\
&=[f(1)-f(0)]\lim_{ n \to \infty } a_n+f(0) \\
&=[f(1)-f(0)]\xi+f(0)
\end{align}
$$
由 $\xi$ 的任意性，任何实数均满足性质，证毕






