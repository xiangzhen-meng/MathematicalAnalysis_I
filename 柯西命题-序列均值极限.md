# 柯西命题-序列均值极限

参考：[知乎专栏](https://zhuanlan.zhihu.com/p/266485978) pikachu345 的数学笔记

## 定理：无穷小数列的均值仍是无穷小

> [!question] 问题 1
> 已知$x_n \to A$,求$$\lim_{n \rightarrow \infty} \frac{x_n + x_{n-1} + ...+x_1}{n}$$

由[[逐项估计]]的思路，我们可以把问题加强为估计$$\frac{1}{n}\sum_{k\leq n}\left|x_k-A\right|$$ 
因为在尾部的部分很小，大部分的值集中在靠近$k=1$的部分，故对于前有限项和后无限项制造 [[分段估计]] 

对于后无限项进行分段估计：
$$
\forall\varepsilon >0,\exists N_{\varepsilon},\ s.t.\forall k > N_{\varepsilon},都有 |x_k-A|<\varepsilon
$$
前有限项之和的均值显然有上界：
$$
\frac{B_{\varepsilon}}{p}
$$
因此有：$$
\begin{aligned}\frac{1}{n}\sum_{k\leq n}\left|x_k-A\right|&=\frac{1}{n}\sum_{k\leq N_{\varepsilon}}\left|x_k-A\right|+\frac{1}{n}\sum_{n\geq k>N_{\varepsilon}}\left|x_k-A\right|\\& \leq \frac{B_{\varepsilon}}{n}+\frac{n-N_{\varepsilon}}{n}\varepsilon \end{aligned}
$$两边取上极限，于是得到$$\frac{1}{n}\sum_{k\leq n}\left|x_k-A\right|\to 0$$于是$$\lim_{n\to \infty}\left|\frac{1}{n}\sum_{k\leq n}x_k-A\right|=0$$
## 推论
### 推论 1 ：无穷小数列的几何、调和、平方均值仍是无穷小

#### 调和均值

取 $\frac{x_n + x_{n-1} + ...+x_1}{n}$ 中所有 $x_i$ 为 $\frac{1}{x_i}$，得到：
$$
\lim_{n \rightarrow \infty} \frac{\frac{1}{x_1} + \frac{1}{x_2} +\dots+\frac{1}{x_n}}{n}=\frac{1}{A}
$$
两边同时取倒数，即得到结果

#### 几何均值

考虑到由均值不等式链：
$$
HM<GM<AM
$$
使用夹逼准则即可

#### 平方均值

由 $x_i$ 是无穷小量，得到 $x_i^2$ 也是无穷小量，
进而得到 $QM^2$ 也是无穷小量，得到 QM 是无穷小量

### 应用 1 

#### 例子一：对于阶乘的估计

>[!question] 例子 1 
>求证$$
>\lim_{ n \to \infty } \frac{1}{ \sqrt[n]{ n! }} =0
>$$


$$
\sqrt[n]{ \frac{1}{n}\cdot \frac{1}{n-1}\cdot \frac{1}{n-2}\dots \frac{1}{1} } \leq \frac{1+\frac{1}{2}+\frac{1}{3}+\dots+\frac{1}{n}}{n}
$$
由柯西命题，显然右侧为无穷小序列
使用夹逼准则，左侧极限为 0，证毕

或者：直接使用 [[柯西命题-序列均值极限#推论：无穷小数列的几何、调和、平方均值仍是无穷小|推论]] ，左侧直接为无穷小序列

还有别的方法，参看 [[对阶乘的估计#例子 1]]  

### 推论 2：两项差分极限的形式

若有
$$
\lim_{ n \to \infty } (a_n-a_{n-1})=d
$$
成立，则有：
$$
\lim_{ n \to \infty } \frac{a_n}{n}=d
$$
#### 理解

到充分多项之后，每一项之间近似成等差数列，而前有限项可以近似看作等差数列，因此可以有：$a_n\approx nd$ ，即目标形式

这其实是一种差分形式的改写

#### 证明

补充定义：$a_{0}=0$ 
可以把 $a_n$ 写成 $(a_n-a_{n-1})+(a_{n-1}-a_{n-2})+\dots+(a_{2}-a_{1})+(a_{1}-a_{0})$ 的形式，其中每一个单项都是趋于 d 的无穷序列中的一项
显然证毕

## 例题
### 问题 1：倒序乘积的均值

> [!question] 问题2
> 假设$x_n\to A,y_n \to B$证明$$\frac{x_1y_n+\cdots +x_ny_1}{n}\to AB$$

#### 2.1 做法1 

参照问题1，我们可以把问题转换为证明
$$
\left|\frac{1}{n}\sum_{k\leq n}x_{k}y_{n+1-k}-AB\right|
$$
我们同样可以考虑[[逐项估计]]证明一个加强的命题
$$
\frac{1}{n}\sum_{k\leq n}\left|x_{k}y_{n+1-k}-AB\right|
$$
对于这种两项乘积的形式：
我们可以考虑利用 [[绝对值不等式]]，把整体的估计用两两估计控制起来
另一方面，这里使用了 [[绝对值不等式#常用技巧：添项去项]] 
$$
|x_ky_{n+1-k}-AB|\leq |x_ky_{n+1-k}-Ay_{n+1-k}|+|Ay_{n+1-k}-AB|
$$ 
继续对前有限项和后无限项进行分段估计：
对于$x_k$而言，任意$\varepsilon>0$存在使得任意都有$|x_k-A|<\varepsilon$，于是：

对于后无限项，也就是$k>N_{\varepsilon}$：
$$
\begin{aligned}
|x_ky_{n+1-k}-AB|&\leq |x_ky_{n+1-k}-Ay_{n+1-k}|+|Ay_{n+1-k}-AB|\\ &<\varepsilon |y_{n+1-k}|+|A|\cdot|y_{n+1-k}-B| \\
&<\varepsilon |y_{n+1-k}|+|A|\varepsilon'
\end{aligned}
$$
对于前有限项，也就是$k\leq N_{\varepsilon}$：
令$M_{\varepsilon}$是前$N_{\varepsilon}$当中 $|x_k-A|$ 最大的一项
**注意**：此处利用 [[an epsilon of room]] ，把无穷命题转换为有限问题，方能进行取最值操作
于是有：
$$
\begin{aligned}
|x_ky_{n+1-k}-AB|&\leq |x_ky_{n+1-k}-Ay_{n+1-k}|+|Ay_{n+1-k}-AB|\\ &\leq M_{\varepsilon}|y_{n+1-k}|+|A|\cdot |y_{n+1-k}-B| \\
&\leq M_{\varepsilon}|y_{n+1-k}|+|A|\varepsilon'
\end{aligned}
$$
于是整体做分段估计就是
$$
\begin{aligned}
\frac{1}{n}\sum_{k\leq n}\left|x_{k}y_{n+1-k}-AB\right|&=\frac{1}{n}\sum_{ k\leq N_{\varepsilon}}\left|x_{k}y_{n+1-k}-AB\right|+\frac{1}{n}\sum_{N_{\varepsilon}< k\leq n}\left|x_{k}y_{n+1-k}-AB\right|\\&<\frac{1}{n}\sum_{ k\leq N_{\varepsilon}}\left(M_{\varepsilon}|y_{n+1-k}|+|A|\cdot |y_{n+1-k}-B|\right)\\&+\frac{1}{n}\sum_{ N_{\varepsilon}< k\leq n}\left(\varepsilon |y_{n+1-k}|+|A|\cdot|y_{n+1-k}-B| \right) \\ &<\frac{T_{\varepsilon}M_{\varepsilon}}{n}+\frac{\varepsilon}{n}\sum_{k=1}^n |y_{n+1-k}|+\frac{|A|}{n}\sum_{k=1}^n |y_{n+1-k}-B|\\&= \frac{T_{\varepsilon}M_{\varepsilon}}{n}+\frac{\varepsilon}{n}\sum_{j=1}^n |y_{j}|+\frac{|A|}{n}\sum_{j=1}^n |y_{j}-B|
\end{aligned}
$$
* 这里我们假设前$N_{\varepsilon}$的$y_{n+1-k}$的和的上界为$T_{\varepsilon}$，因为固定$\varepsilon$以后这个和是有限的和。
* 上面最后两行的放缩，是想要利用问题1的结果，即极限的算术平均值的极限等于序列极限本身。而我们知道$|y_j|\to |B|$以及$|y_j-B|\to 0$。
两边取上极限，于是得到$$\limsup_{n\to \infty } \frac{1}{n}\sum_{k\leq n}\left|x_{k}y_{n+1-k}-AB\right|\leq \varepsilon |B| $$对任意$\varepsilon>0$成立。于是这便说明
$$
\left|\frac{1}{n}\sum_{k\leq n}x_{k}y_{n+1-k}-AB\right|\to 0
$$

#### 2.2 做法2

> [!tip] 想法
> 如果你发现一个$S_n'$其形式比$S_n$更好得到渐近展开，比如说对$S_n$做某种放缩，只要放缩整体的误差是被$O(g(n))$控制起来的(这里表示目标误差精度)，那么最终的渐近展开是相同的。

那么这个问题我们可以理解为对部分和$$S_n:=\sum_{k\leq n}x_{k}y_{n+1-k}$$做渐近展开，要求误差精度至少为$o(n)$。同时我们发现，问题1其实告诉我们$$S_n':=\sum_{k\leq n}x_ky_k=ABn+o(n)$$那么如果我们可以证明$$S_n-S_n'=o(n)$$那么整个问题就可以被证明了。而我们已意识到，这实际上并不困难,因为$$\begin{aligned}|S_n-S_n'|&\leq \sum_{k\leq n}|x_k(y_k-y_{n+1-k})|\\&\leq M\sum_{k\leq n}|y_k-y_{n+1-k}|\\&\leq M\sum_{k\leq n} \left(|y_k-B|+|y_{n+1-k}-B|\right)\\&= 2M\sum_{k\leq n}|y_k-B|\\&= o(n)\end{aligned}$$于是整个计划是行得通的，因此$$S_n:=\sum_{k\leq n}x_{k}y_{n+1-k}=ABn+o(n)$$那么$$S_n/n = AB+o(1)$$以此极限为$AB$.

### 问题 2：另外一种掺杂的柯西命题

>[!note] 问题 2 
>已知：$\lim_{ n \to \infty }a_n=a$，求证：
>$$
>\lim_{ n \to \infty } \left(\frac{1}{2^n}\sum_{k=0}^{n}C_n^ka_k\right)=a
>$$

#### 直观感受

感觉上很像是二项式定理，因为只要把 sigma 展开后就可以看出来：
$$
\frac{{C_n^0a_{0}+C_n^1a_{1}+C_n^2a_{2}+\dots+C_n^na_n}}{2^n}
$$
直观上看来，如果 $a_n$ 近乎为常数的话，上面的东西其实就是 a 乘以二项式展开的组合数，显然直接比一下就得到答案是 a，符合直觉

对于这样有限项和无限项性质不同的序列，显然应该使用的是 [[an epsilon of room]] 思想

#### 证明

##### 逐项估计

首先，常规手段，将 a 挪到左边来，试图证明为无穷小序列
$$
\begin{align}
\frac{1}{2^n}\sum_{k=0}^{n}C_n^ka_k-a &= \frac{{C_n^0a_{0}+C_n^1a_{1}+C_n^2a_{2}+\dots+C_n^na_n}}{2^n} - a \\
&=\frac{{C_n^0a_{0}+C_n^1a_{1}+C_n^2a_{2}+\dots+C_n^na_n}-2^na}{2^n}
\end{align}
$$
考虑到对称性，可以把 $2^n$ 进行二项展开，把 a 塞进去：
$$
\begin{align}
RHS&=\frac{({C_n^0a_{0}+C_n^1a_{1}+C_n^2a_{2}+\dots+C_n^na_n})-({C_n^0a+C_n^1a+C_n^2a+\dots+C_n^na})}{2^n} \\
&= \frac{{C_n^0(a_{0}-a)+C_n^1(a_{1}-a)+C_n^2(a_{2}-a)+\dots+C_n^n(a_n-a)}}{2^n}
\end{align}
$$
也即，我们进行了 [[逐项估计]] ，将原式变为：
$$
\begin{align}
\left|\frac{1}{2^n}\sum_{k=0}^{n}C_n^ka_k-a\right| = \frac{1}{2^n}\sum_{k=0}^{n}C_n^k|a_k-a|
\end{align}
$$
##### epsilon of room

首先处理后无穷多项：
对于给定的 $\varepsilon$，取定 $N$，使得其后无穷多项每个单项 $|a_n-a|$ 都小于 $\varepsilon$ 
显然这样就足够了

然后处理前有限项：
显然可以取到一个最大值 $M=max_{k=0}^{N}|a_k-a|$
$$
\frac{1}{2^n}\sum_{k=0}^{N}C_n^k|a_k-a|=\frac{M({C_n^0+C_n^1+C_n^2+\dots+C_n^N})}{2^n}
$$
考虑到分子上面有 n，不太好，可以适当地放缩掉：
**这个放缩没见过** 
$$
C_n^k=\frac{n(n-1)(n-2)\dots(n-k+1)}{k!} <n^k
$$
于是有：
$$
RHS=\frac{M\frac{n^{N+1}-1}{n-1}}{2^n}
$$
由 [[增长速度的比较]] 显然 RHS 是个无穷小序列，存在 $N_{1}$ 使其满足条件

合并两部分的证明，证毕