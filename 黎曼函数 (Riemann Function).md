# 黎曼函数 (Riemann Function)

## 概念
$$
R(x)=\left\{ 
\begin{array}{ll}
\frac{1}{q}, x=\frac{p}{q}, p\in \mathbb{Z}, q\in \mathbb{N}_+, (p, q)=1 \\
0, otherwize
\end{array}
\right .
$$
## 性质

### 连续性

>[!note] 黎曼函数的连续性
>所有有理点处函数不连续，所有有理点都是可去间断点；所有无理点处函数均连续

#### 证明

下面想要说明，函数任意一点的极限都是 0。任取函数上一点 $x\in \mathbb{R}$

想要证明 $R(x)< \varepsilon$，不妨考虑反面，也即何时出现 $R(x)\geq \varepsilon$ 

对于所有的无理点，显然为零，故下面考虑所有有理点：

显然有：$\frac{1}{q}\geq \varepsilon$ 也即 $q\leq \frac{1}{\varepsilon}$ 时有上述式子成立。对于取定的 $\varepsilon$ ，显然有这样的 q 仅有有限个，故必定可以控制住，故给出下列集合：
$$
\mathbb{F}=\left\{ 1, 2, \dots, \left[ \frac{1}{\varepsilon} \right] \right\}
$$
显然这里包含了所有不满足情况的分母

故可以这样做：先取定邻域：$O^-(x, 1)$ ，考察所有分母处于上述集合的有理点。显然数目为有限个，故必定可以取到离邻域中心最近的一个：
$$
\delta:=\min\left\{ \left|\frac{p}{q}-x_{0}\right||q\in \mathbb{F},p\in \mathbb{Z},q\in \mathbb{N}, (p, q)=1\right\}
$$
因此在更小的邻域：$O(x_{0},\delta)$ 成立，故函数处处左右极限均为 0，也即点点极限为 0

因此，无理点函数值为零，等于左右极限，连续；有理点函数值不为零，不等于左右极限，为可去间断点

注意，黎曼函数是一个 [[连续性#函数的单点连续|单点连续]] 的例子，也即某个单点连续，而这个单点任意小的邻域均不能保证点点连续

### 不可导性

黎曼函数 **处处不可导**，下面给出证明：

对于所有有理点，黎曼函数不连续，显然不可导，下面考察所有的无理点

证明其不可导，也即证明：
$$
\not \exists \lim_{ x \to x_{0} } \frac{R(x)-R(x_{0})}{x-x_{0}},x_{0}\in \mathbb{R}\setminus \mathbb{Q}
$$
方便起见，称：
$$
f(x)=\frac{R(x)-R(x_{0})}{x-x_{0}}=\frac{R(x)}{x-x_{0}}
$$
可以使用 [[序列极限与函数极限的关系（海涅归结原理）]] ，通过尝试找到两个序列极限不相同的子列，证明函数极限不存在

一方面，考察所有趋近于 $x_{0}$ 的无理点，显然有无理序列，使得函数值恒等于零，故该序列的极限为零

另一方面，构造另外序列，使得该序列第 $n$ 项为 $x_{0}$ 小数点后第 $n$ 位的截断，则考察分子，必有：$y_n$ 的分母显然小于等于 $10^n$ （可能小于，因为不一定与 $10^n$ 既约），因此有：
$$
R(y_n)\geq \frac{1}{10^n}
$$
另一方面，考察分母，显然与 $x_{0}$ 的差的前 n 位小数都是 0，必然有：
$$
x_{0}-x\leq \frac{1}{10^n}
$$
因此有：
$$
\left| \frac{R(y_n)}{x-x_{0}} \right| \geq \left| \frac{1/10^n}{1/10^n} \right|=1 
$$
显然不可能收敛到 0

则这两个趋近于 $x_{0}$ 的序列对应的 $\{f(x_n)\}$ 不一致收敛，故由海涅归结原理，函数 $f(x)$ 极限不存在，也即黎曼函数在无理点处处不可导，故黎曼函数处处不可导


